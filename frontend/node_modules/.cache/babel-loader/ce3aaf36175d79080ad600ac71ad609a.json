{"ast":null,"code":"var _jsxFileName = \"/home/monky/Grp10LargeProject/Grp10LargeProject/frontend/src/components/Friends.js\";\nimport React, { setState, useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport './RegistrationForm/RegistrationForm.css';\n\nfunction Friends() {\n  function FriendContainer(props) {\n    let history = useHistory();\n    return props.state.localFriends.map((item, index) => {\n      return /*#__PURE__*/React.createElement(\"button\", {\n        class: \"btn friendBox\",\n        onClick: () => {\n          history.push({\n            pathname: 'viewFriend',\n            state: item\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 12,\n          columnNumber: 14\n        }\n      }, '@' + item.login);\n    });\n  }\n\n  const jwt = require(\"jsonwebtoken\");\n\n  var storage = require(\"../tokenStorage.js\");\n\n  var tok = storage.retrieveToken();\n  var ud = jwt.decode(tok, {\n    json: true\n  });\n  var localuser = ud.userID;\n  const [buttonPopup, setButtonPopup] = useState({\n    popupState: false,\n    localUserID: localuser\n  });\n  const [state, setState] = useState({\n    localFriends: []\n  });\n  const [addFriend, setAddFriend] = useState({\n    currentQuery: \"\",\n    addMessage: \"\"\n  }); //function to get the friends data\n\n  const getFriends = () => {\n    //get is getting every response by the endpoint\n    const payload = {\n      userID: buttonPopup.localUserID\n    };\n    axios.post(\"https://letsbuckit.herokuapp.com/api/fr-allfriends\", payload).then(response => {\n      setState({\n        localFriends: response.data.results\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }; // this is going to delete the item from the\n\n\n  const deleteFriend = () => {\n    const payload = {\n      userID: localUserID,\n      friendID: localfriendsId\n    };\n    axios.post(\"https://letsbuckit.herokuapp.com/api/fr-remove\", payload).then(response => {\n      var responseList = response.data.results;\n      console.log(responseList);\n      window.location.reload(true);\n    });\n  };\n\n  useEffect(() => {\n    getFriends();\n  }, []);\n\n  const handleKeyDown = e => {\n    var friendLogin;\n    const {\n      value\n    } = e.target;\n\n    if (e.key === 'Enter') {\n      if (value.charAt(0) === '@') {\n        friendLogin = value.substring(1);\n      } else {\n        friendLogin = value;\n      }\n    }\n\n    const payload = {\n      senderID: localuser,\n      login: friendLogin\n    };\n    axios.post('https://letsbuckit.herokuapp.com/fr-request', payload).then(function (response) {\n      if (response.status == 200) {\n        setAddFriend({\n          addMessage: \"Friend added successfully!\"\n        });\n      } else {\n        setAddFriend({\n          addMessage: \"Error!\"\n        });\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const handleChange = e => {\n    const {\n      id,\n      value\n    } = e.target;\n    setAddFriend({\n      currentQuery: value\n    });\n  };\n\n  let history = useHistory();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    class: \"friendContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"link\", {\n    rel: \"preconnect\",\n    href: \"https://fonts.gstatic.com\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"link\", {\n    href: \"https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap\",\n    rel: \"stylesheet\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    class: \"btn returnHomeButton\",\n    onClick: () => {\n      history.push('/home');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }, \"Return Home\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"links\",\n    id: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }, addFriend.addMessage), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"addFriendContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"form-control searchBarHome\",\n    id: \"currentQuery\",\n    value: addFriend.currentQuery,\n    onChange: handleChange,\n    onKeyDown: handleKeyDown,\n    placeholder: \"To add a friend, enter their username here, then press Enter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"friendBoxContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(FriendContainer, {\n    state: state,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default Friends;","map":{"version":3,"sources":["/home/monky/Grp10LargeProject/Grp10LargeProject/frontend/src/components/Friends.js"],"names":["React","setState","useState","useEffect","useContext","axios","useHistory","Friends","FriendContainer","props","history","state","localFriends","map","item","index","push","pathname","login","jwt","require","storage","tok","retrieveToken","ud","decode","json","localuser","userID","buttonPopup","setButtonPopup","popupState","localUserID","addFriend","setAddFriend","currentQuery","addMessage","getFriends","payload","post","then","response","data","results","catch","err","console","log","deleteFriend","friendID","localfriendsId","responseList","window","location","reload","handleKeyDown","e","friendLogin","value","target","key","charAt","substring","senderID","status","handleChange","id"],"mappings":"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","sourcesContent":["import React, { setState, useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\";\nimport {useHistory} from \"react-router-dom\"\nimport './RegistrationForm/RegistrationForm.css'\n\nfunction Friends() {\n\n  function FriendContainer(props){\n    let history = useHistory();\n    return(\n    props.state.localFriends.map((item, index) => {\n      return(<button class=\"btn friendBox\" onClick={()=>{history.push({pathname:'viewFriend',state:item})}}>{'@' + item.login}</button>)\n    })\n    )\n  }\n  \n  const jwt = require(\"jsonwebtoken\");\n  var storage = require(\"../tokenStorage.js\");\n\n  var tok = storage.retrieveToken();\n  var ud = jwt.decode(tok, { json: true });\n\n  var localuser = ud.userID;\n\n  const [buttonPopup, setButtonPopup] = useState({\n    popupState: false,\n    localUserID: localuser\n  });\n  \n  const [state, setState] = useState({\n    localFriends: []\n  });\n\n  const [addFriend, setAddFriend] = useState({\n    currentQuery:\"\",\n    addMessage:\"\"\n  });\n\n  //function to get the friends data\n  const getFriends = () => {\n    //get is getting every response by the endpoint\n    const payload = { userID: buttonPopup.localUserID };\n    axios\n      .post(\"https://letsbuckit.herokuapp.com/api/fr-allfriends\", payload)\n      .then((response) => {\n        setState({\n          localFriends:response.data.results\n        });\n      })\n      .catch(err =>{\n        console.log(err);\n      })\n  };\n\n  // this is going to delete the item from the\n  const deleteFriend = () => {\n    const payload = { userID: localUserID, friendID: localfriendsId };\n    axios\n      .post(\"https://letsbuckit.herokuapp.com/api/fr-remove\", payload)\n      .then((response) => {\n        var responseList = response.data.results;\n        console.log(responseList);\n        window.location.reload(true);\n      });\n  };\n\n  useEffect(() => {\n    getFriends();\n  }, []);\n\n  const handleKeyDown = (e) => {\n    var friendLogin;\n    const {value} = e.target;\n    if(e.key === 'Enter'){\n      if(value.charAt(0) === '@'){\n        friendLogin = value.substring(1);\n      }\n      else{\n        friendLogin = value;\n      }\n    }\n\n    const payload = {senderID:localuser,login:friendLogin};\n    axios\n    .post('https://letsbuckit.herokuapp.com/fr-request',payload)\n    .then(function (response){\n      if(response.status == 200){\n        setAddFriend({\n          addMessage: \"Friend added successfully!\"\n        });\n      }\n      else{\n        setAddFriend({\n          addMessage: \"Error!\"\n        });\n      }\n    })\n    .catch(err =>{\n      console.log(err);\n    });\n  }\n\n  const handleChange = (e) => {\n    const { id, value } = e.target;\n    setAddFriend({\n      currentQuery: value\n    });\n  }\n\n  let history = useHistory();\n\n  return (\n\n    <div class=\"friendContainer\">\n      <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\"></link>\n      <link href=\"https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap\" rel=\"stylesheet\"></link>\n\n      <button class=\"btn returnHomeButton\" onClick={()=>{history.push('/home')}}>Return Home</button>\n      <div class=\"links\" id=\"error\">{addFriend.addMessage}</div>\n      <div class=\"addFriendContainer\">\n        <input class=\"form-control searchBarHome\" id=\"currentQuery\" value={addFriend.currentQuery} onChange={handleChange} onKeyDown={handleKeyDown} placeholder=\"To add a friend, enter their username here, then press Enter\"></input>\n      </div>\n      <div class=\"friendBoxContainer\">\n        <FriendContainer state={state} />\n      </div>\n    </div>\n  );\n}\n\nexport default Friends;\n"]},"metadata":{},"sourceType":"module"}