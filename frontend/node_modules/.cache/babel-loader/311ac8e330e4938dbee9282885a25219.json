{"ast":null,"code":"var _jsxFileName = \"/home/monky/Grp10LargeProject/Grp10LargeProject/frontend/src/components/Home/Home.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport './home.css';\nimport { Route, withRouter, Link, Switch, useHistory } from \"react-router-dom\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faFill } from '@fortawesome/free-solid-svg-icons';\nimport { faList } from '@fortawesome/free-solid-svg-icons';\nimport { faUserFriends } from '@fortawesome/free-solid-svg-icons';\nimport { faCog } from '@fortawesome/free-solid-svg-icons';\nimport { faSignOutAlt } from '@fortawesome/free-solid-svg-icons';\nimport { faCheckSquare, faSquare, faTrash, faYenSign } from '@fortawesome/free-solid-svg-icons';\nimport friends from \"../Friends\";\nimport navbar from \"../Navbar\";\n\nfunction Home(props) {\n  function ListContainer(props) {\n    if (props.state != undefined && props.state.currentListItems != undefined) {\n      var listItemState = '';\n\n      if (props.state.currentState === 0) {\n        listItemState = \"Bucket List\";\n      } else {\n        listItemState = \"Todo List\";\n      }\n\n      if (props.state.currentListItems.length > 0) {\n        return props.state.currentListItems.map((item, index) => {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            class: \"list-item-Home\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 31,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            class: \"type\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 32,\n              columnNumber: 17\n            }\n          }, listItemState), /*#__PURE__*/React.createElement(\"div\", {\n            class: \"listTitle\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 35,\n              columnNumber: 17\n            }\n          }, item.itemTitle), /*#__PURE__*/React.createElement(\"div\", {\n            class: \"listBody\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 38,\n              columnNumber: 17\n            }\n          }, item.caption), /*#__PURE__*/React.createElement(\"div\", {\n            class: \"complete\",\n            onClick: async e => {\n              console.log(item._id);\n\n              if (props.state.currentState == 0) {\n                //NEEDS TESTING!!!!!!!\n                const payload = {\n                  ID: item._id\n                };\n                const response = await axios.post('/api/edit-bucket', payload);\n\n                if ((await response.status) != 200) {\n                  console.log('error editing this item idk');\n                  return;\n                }\n\n                console.log('list item completed success');\n              } else {\n                const payload = {\n                  ID: item._id\n                };\n                const response = await axios.post('/api/edit-todo', payload);\n\n                if ((await response.status) != 200) {\n                  console.log('error editing this item idk');\n                  return;\n                }\n\n                console.log('list item completed success');\n                props.deleteItem();\n              }\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 41,\n              columnNumber: 17\n            }\n          }, item.completed ? /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n            icon: faCheckSquare,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 25\n            }\n          }) : /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n            icon: faSquare,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 25\n            }\n          })), /*#__PURE__*/React.createElement(\"div\", {\n            class: \"removeListItem\",\n            onClick: async e => {\n              console.log(item._id);\n\n              if (props.state.currentState == 0) {\n                const payload = {\n                  ID: item._id\n                };\n                const response = await axios.post('/api/delete-bucket', payload);\n\n                if ((await response.status) != 200) {\n                  console.log(\"error deleting this item idk\");\n                  return;\n                }\n\n                console.log(\"delete item complete success\");\n              } else {\n                const payload = {\n                  ID: item._id\n                };\n                const response = await axios.post('/api/delete-todo', payload);\n\n                if ((await response.status) != 200) {\n                  console.log(\"error deleting this item idk\");\n                  return;\n                }\n\n                props.state.currentListItems.splice(index, 1);\n                console.log('delete item complete sucess');\n              }\n\n              props.deleteItem();\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n            icon: faTrash,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 19\n            }\n          })));\n        });\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null);\n  }\n\n  const [state, setState] = useState({\n    searchQuery: \"\",\n    currentListItems: [],\n    currentState: 0\n  });\n  const [addState, setAddState] = useState({\n    addTitle: \"\",\n    addDesc: \"\",\n    currentAddState: 0\n  });\n  const history = useHistory();\n\n  function logOut() {\n    localStorage.clear();\n    history.push(\"/login\");\n    console.log(localStorage);\n  }\n\n  const jwt = require('jsonwebtoken');\n\n  var storage = require('../../tokenStorage.js');\n\n  var tok = storage.retrieveToken();\n  var ud = jwt.decode(tok, {\n    json: true\n  });\n\n  if (ud == null) {\n    window.location = \"https://letsbuckit.herokuapp.com/login\";\n    return;\n  }\n\n  var localUserID = ud.userID;\n  var firstName = ud.firstName;\n  var lastName = ud.lastName; //END OF TOKEN CRAP\n\n  useEffect(() => {\n    searchListItems();\n  }, [state.searchQuery, state.currentState]); //handle change template\n\n  const handleSearchChange = e => {\n    const {\n      id,\n      value\n    } = e.target;\n    console.log(state);\n    setState(prevState => ({ ...prevState,\n      searchQuery: value\n    }));\n  };\n\n  const handleWebpageStateChange = e => {\n    setState(prevState => ({ ...prevState,\n      currentState: Number(!state.currentState),\n      currentListItems: []\n    }));\n  }; //search list items\n\n\n  const searchListItems = async () => {\n    if (state.currentState == 0) {\n      const payload = {\n        userId: localUserID,\n        search: state.searchQuery\n      };\n      axios.post('https://letsbuckit.herokuapp.com/api/search-bucket', payload).then(res => {\n        setState(prevState => ({ ...prevState,\n          currentListItems: res.data.results\n        }));\n      }).catch(err => {\n        console.log(err);\n      });\n    } else {\n      const payload = {\n        userId: localUserID,\n        search: state.searchQuery\n      };\n      axios.post('/api/search-todo', payload).then(res => {\n        setState(prevState => ({ ...prevState,\n          currentListItems: res.data.results\n        }));\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }; //load all list items [ADD TODO]\n\n\n  const getAllListItems = async () => {\n    //YUCK! SUCKS BIG OL PEENIE\n    const payload = {\n      userID: localUserID\n    };\n    const response = await axios.post('/api/all-buckets', payload);\n\n    if (response.status == 500) {\n      responseListItems = [];\n    } else {\n      var responseListItems = response.data.results;\n    }\n\n    console.log(responseListItems);\n    setState(prevState => ({ ...prevState,\n      currentListItems: responseListItems\n    }));\n  }; //add list items\n\n\n  const addItemToList = async () => {\n    if (addState.currentAddState == 0) {\n      const payload = {\n        userID: localUserID,\n        itemTitle: addState.addTitle,\n        caption: addState.addDesc\n      };\n      const response = await axios.post('/api/add-bucket', payload);\n\n      if ((await response.status) != 200) {\n        console.log(\"Big error. Probably caused by connection\");\n        return;\n      }\n\n      console.log(addState);\n      setAddState(prevState => ({ ...prevState,\n        addTitle: \"\",\n        addDesc: \"\"\n      }));\n      searchListItems();\n    } else {\n      const payload = {\n        userID: localUserID,\n        itemTitle: addState.addTitle\n      };\n      const response = await axios.post('api/add-todo', payload);\n\n      if ((await response.status) != 200) {\n        console.log(\"Big error. Probably caused by connection\");\n        return;\n      }\n\n      console.log(addState);\n      setAddState(prevState => ({ ...prevState,\n        addTitle: \"\",\n        addDesc: \"\"\n      }));\n      searchListItems();\n    }\n  }; //handle change template\n\n\n  const handleChange = e => {\n    const {\n      id,\n      value\n    } = e.target;\n    setAddState(prevState => ({ ...prevState,\n      [id]: value\n    }));\n  }; //handle the radio buttons\n\n\n  const handleRadio = e => {\n    const {\n      value\n    } = e.target;\n    setAddState(prevState => ({ ...prevState,\n      currentAddState: value\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(Route, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"html\", {\n    lang: \"en\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"head\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"meta\", {\n    name: \"viewport\",\n    content: \"width=device-width, initial-scale=1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"link\", {\n    rel: \"preconnect\",\n    href: \"https://fonts.gstatic.com\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"link\", {\n    href: \"https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap\",\n    rel: \"stylesheet\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"body\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"addItem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"addItem-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 15\n    }\n  }, \"Add to a list\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"addItem-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"addItemTitle form-control\",\n    id: \"addTitle\",\n    type: \"text\",\n    placeholder: \"Goal\",\n    value: addState.addTitle,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"textarea\", {\n    class: \"addItemDesc form-control\",\n    type: \"text\",\n    id: \"addDesc\",\n    placeholder: \"Describe your goal here!\",\n    value: addState.addDesc,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"buttonContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 17\n    }\n  }, \"Which list?\"), /*#__PURE__*/React.createElement(\"div\", {\n    onChange: handleRadio,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"radio\",\n    value: \"0\",\n    class: \"listTypeButton btn-check\",\n    name: \"options\",\n    id: \"option1\",\n    autocomplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    class: \"btn btn-secondary\",\n    for: \"option1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 137\n    }\n  }, \"Bucket\"), \" \", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"radio\",\n    class: \"btn-check listTypeButton\",\n    name: \"options\",\n    value: \"1\",\n    id: \"option2\",\n    autocomplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 199\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    class: \"btn btn-secondary\",\n    for: \"option2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 317\n    }\n  }, \"Todo\"))), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    disabled: !addState.addTitle.replace(/\\s/g, ''),\n    class: \"btn addItemButton\",\n    onClick: addItemToList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 21\n    }\n  }, \"Add\")), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"sidenav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"sidebar-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 15\n    }\n  }, \"Welcome,\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"user-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 15\n    }\n  }, firstName, \" \", lastName), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"sidebar-item\",\n    onClick: () => {\n      handleWebpageStateChange();\n    },\n    style: {\n      color: state.currentState ? \"white\" : \"#FFC856\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faFill,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 17\n    }\n  }), \"Bucket List\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"sidebar-item\",\n    onClick: () => {\n      handleWebpageStateChange();\n    },\n    style: {\n      color: state.currentState ? \"#FFC856\" : \"white\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 17\n    }\n  }), \"Todo List\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"sidebar-item\",\n    onClick: () => {\n      history.push('/friends');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faUserFriends,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 17\n    }\n  }), \"Friends\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"sidebar-item\",\n    onClick: () => {\n      history.push('/navbar');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faCog,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 17\n    }\n  }), \"Settings\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"sidebar-item\",\n    onClick: () => {\n      logOut();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faSignOutAlt,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 17\n    }\n  }), \"Sign-Out\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"sidebar-bottom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 15\n    }\n  }, \"[insert graphic]Bucket List\")), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    class: \"form-control searchBarHome\",\n    onChange: handleSearchChange,\n    placeholder: \"Search...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(ListContainer, {\n    state: state,\n    deleteItem: searchListItems,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 15\n    }\n  }))))));\n}\n\nexport default withRouter(Home);","map":{"version":3,"sources":["/home/monky/Grp10LargeProject/Grp10LargeProject/frontend/src/components/Home/Home.js"],"names":["React","useEffect","useState","axios","Route","withRouter","Link","Switch","useHistory","FontAwesomeIcon","faFill","faList","faUserFriends","faCog","faSignOutAlt","faCheckSquare","faSquare","faTrash","faYenSign","friends","navbar","Home","props","ListContainer","state","undefined","currentListItems","listItemState","currentState","length","map","item","index","itemTitle","caption","e","console","log","_id","payload","ID","response","post","status","deleteItem","completed","splice","setState","searchQuery","addState","setAddState","addTitle","addDesc","currentAddState","history","logOut","localStorage","clear","push","jwt","require","storage","tok","retrieveToken","ud","decode","json","window","location","localUserID","userID","firstName","lastName","searchListItems","handleSearchChange","id","value","target","prevState","handleWebpageStateChange","Number","userId","search","then","res","data","results","catch","err","getAllListItems","responseListItems","addItemToList","handleChange","handleRadio","replace","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport './home.css';\nimport { Route, withRouter, Link, Switch, useHistory } from \"react-router-dom\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faFill } from '@fortawesome/free-solid-svg-icons'\nimport { faList } from '@fortawesome/free-solid-svg-icons'\nimport { faUserFriends } from '@fortawesome/free-solid-svg-icons'\nimport { faCog } from '@fortawesome/free-solid-svg-icons'\nimport { faSignOutAlt } from '@fortawesome/free-solid-svg-icons'\nimport { faCheckSquare, faSquare, faTrash, faYenSign } from '@fortawesome/free-solid-svg-icons';\nimport friends from \"../Friends\";\nimport navbar from \"../Navbar\";\n\nfunction Home(props) {\n\n  function ListContainer(props) {\n\n    if (props.state != undefined && props.state.currentListItems != undefined) {\n      var listItemState = '';\n      if (props.state.currentState === 0) {\n        listItemState = \"Bucket List\";\n      }\n      else {\n        listItemState = \"Todo List\";\n      }\n      if (props.state.currentListItems.length > 0) {\n        return (\n          props.state.currentListItems.map((item, index) => {\n            return (\n              <div class=\"list-item-Home\">\n                <div class=\"type\">\n                  {listItemState}\n                </div>\n                <div class=\"listTitle\">\n                  {item.itemTitle}\n                </div>\n                <div class=\"listBody\">\n                  {item.caption}\n                </div>\n                <div class=\"complete\" onClick={\n                  async (e) => {\n                    console.log(item._id);\n                    if (props.state.currentState == 0) {//NEEDS TESTING!!!!!!!\n                      const payload = { ID: item._id };\n                      const response = await axios.post('/api/edit-bucket', payload);\n                      if (await response.status != 200) {\n                        console.log('error editing this item idk');\n                        return;\n                      }\n                      console.log('list item completed success');\n                    } else {\n                      const payload = { ID: item._id };\n                      const response = await axios.post('/api/edit-todo', payload);\n                      if (await response.status != 200) {\n                        console.log('error editing this item idk');\n                        return;\n                      }\n                      console.log('list item completed success');\n                      props.deleteItem()\n\n                    }\n                  }\n                }>{\n                    item.completed\n                      ? <FontAwesomeIcon icon={faCheckSquare} />\n                      : <FontAwesomeIcon icon={faSquare} />\n                  }</div>\n                <div class=\"removeListItem\" onClick={\n                  async (e) => {\n                    console.log(item._id)\n                    if (props.state.currentState == 0) {\n                      const payload = { ID: item._id };\n                      const response = await axios.post('/api/delete-bucket', payload);\n                      if (await response.status != 200) {\n                        console.log(\"error deleting this item idk\");\n                        return;\n                      }\n                      console.log(\"delete item complete success\");\n                    } else {\n                      const payload = { ID: item._id };\n                      const response = await axios.post('/api/delete-todo', payload);\n                      if (await response.status != 200) {\n                        console.log(\"error deleting this item idk\");\n                        return;\n                      }\n                      props.state.currentListItems.splice(index, 1);\n                      console.log('delete item complete sucess');\n                    }\n                    props.deleteItem();\n                  }\n                }><FontAwesomeIcon icon={faTrash} /></div>\n              </div>\n            )\n          })\n        )\n      }\n    }\n    return (\n      <>\n      </>\n    )\n  }\n  const [state, setState] = useState({\n    searchQuery: \"\",\n    currentListItems: [],\n    currentState: 0,\n  })\n\n  const [addState, setAddState] = useState({\n    addTitle: \"\",\n    addDesc: \"\",\n    currentAddState: 0\n  })\n\n  const history = useHistory();\n  function logOut() {\n    localStorage.clear();\n    history.push(\"/login\");\n    console.log(localStorage);\n  }\n\n  const jwt = require('jsonwebtoken');\n  var storage = require('../../tokenStorage.js');\n\n  var tok = storage.retrieveToken();\n  var ud = jwt.decode(tok, { json: true });\n  \n  if(ud == null){\n    window.location = \"https://letsbuckit.herokuapp.com/login\"\n    return;\n  }\n  var localUserID = ud.userID;\n  var firstName = ud.firstName;\n  var lastName = ud.lastName;\n  //END OF TOKEN CRAP\n\n  useEffect(() => {\n    searchListItems();\n  }, [state.searchQuery, state.currentState]);\n\n\n  //handle change template\n  const handleSearchChange = (e) => {\n    const { id, value } = e.target;\n    console.log(state);\n    setState(prevState => ({\n      ...prevState,\n      searchQuery: value\n    }))\n  }\n\n  const handleWebpageStateChange = (e) => {\n    setState(prevState => ({\n      ...prevState,\n      currentState: Number(!state.currentState),\n      currentListItems: []\n    }))\n  }\n\n  //search list items\n  const searchListItems = async () => {\n    if (state.currentState == 0) {\n      const payload = { userId: localUserID, search: state.searchQuery };\n      axios.post('https://letsbuckit.herokuapp.com/api/search-bucket', payload).then(res => {\n        setState(prevState => ({\n          ...prevState,\n          currentListItems: res.data.results\n        }))\n      })\n        .catch(err => {\n          console.log(err);\n        })\n    }\n    else {\n      const payload = { userId: localUserID, search: state.searchQuery };\n      axios.post('/api/search-todo', payload).then(res => {\n        setState(prevState => ({\n          ...prevState,\n          currentListItems: res.data.results\n        }))\n      })\n        .catch(err => {\n          console.log(err);\n        })\n    }\n  }\n\n\n  //load all list items [ADD TODO]\n  const getAllListItems = async () => {//YUCK! SUCKS BIG OL PEENIE\n    const payload = { userID: localUserID };\n    const response = await axios.post('/api/all-buckets', payload);\n    if (response.status == 500) {\n      responseListItems = []\n    }\n    else {\n      var responseListItems = response.data.results;\n    }\n    console.log(responseListItems);\n    setState(prevState => ({\n      ...prevState,\n      currentListItems: responseListItems\n    }))\n  }\n\n  //add list items\n  const addItemToList = async () => {\n    if (addState.currentAddState == 0) {\n      const payload = { userID: localUserID, itemTitle: addState.addTitle, caption: addState.addDesc };\n      const response = await axios.post('/api/add-bucket', payload);\n      if (await response.status != 200) {\n        console.log(\"Big error. Probably caused by connection\");\n        return;\n      }\n      console.log(addState);\n      setAddState(prevState => ({\n        ...prevState,\n        addTitle: \"\",\n        addDesc: \"\"\n      }));\n      searchListItems();\n    }\n    else {\n      const payload = { userID: localUserID, itemTitle: addState.addTitle };\n      const response = await axios.post('api/add-todo', payload);\n      if (await response.status != 200) {\n        console.log(\"Big error. Probably caused by connection\");\n        return;\n      }\n      console.log(addState);\n      setAddState(prevState => ({\n        ...prevState,\n        addTitle: \"\",\n        addDesc: \"\"\n      }));\n      searchListItems();\n    }\n  }\n\n  //handle change template\n  const handleChange = (e) => {\n    const { id, value } = e.target\n    setAddState(prevState => ({\n      ...prevState,\n      [id]: value\n    }))\n  }\n\n  //handle the radio buttons\n  const handleRadio = (e) => {\n    const { value } = e.target\n    setAddState(prevState => ({\n      ...prevState,\n      currentAddState: value\n    }))\n  }\n\n  return (\n    <Route>\n      <html lang=\"en\">\n        <head>\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"></meta>\n          <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\"></link>\n          <link href=\"https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap\" rel=\"stylesheet\"></link>\n        </head>\n        <body>\n          <div class=\"wrapper\">\n            <div class=\"addItem\">\n              <div class=\"addItem-header\">\n                Add to a list\n    </div>\n              <div class=\"addItem-container\">\n                <input class=\"addItemTitle form-control\" id=\"addTitle\" type=\"text\" placeholder=\"Goal\" value={addState.addTitle} onChange={handleChange}></input>\n                <textarea class=\"addItemDesc form-control\" type=\"text\" id=\"addDesc\" placeholder=\"Describe your goal here!\" value={addState.addDesc} onChange={handleChange}></textarea>\n              </div>\n              <div class=\"buttonContainer\">\n                <div>\n                  Which list?\n      </div>\n                <div onChange={handleRadio}>\n                  <input type=\"radio\" value='0' class=\"listTypeButton btn-check\" name=\"options\" id=\"option1\" autocomplete=\"off\"></input><label class=\"btn btn-secondary\" for=\"option1\">Bucket</label> <input type=\"radio\" class=\"btn-check listTypeButton\" name=\"options\" value='1' id=\"option2\" autocomplete=\"off\"></input><label class=\"btn btn-secondary\" for=\"option2\">Todo</label>\n                </div>\n              </div><button type=\"button\" disabled={!addState.addTitle.replace(/\\s/g, '')} class=\"btn addItemButton\" onClick={addItemToList}>Add</button>\n            </div>\n            <div class=\"sidenav\">\n              <div class=\"sidebar-header\">\n                Welcome,\n    </div>\n              <div class=\"user-name\">\n                {firstName} {lastName}\n              </div>\n              <div class=\"sidebar-item\"\n                onClick={\n                  () => { handleWebpageStateChange() }\n                }\n                style={{\n                  color: state.currentState ? \"white\" : \"#FFC856\"\n                }}>\n                <FontAwesomeIcon icon={faFill} />\n      Bucket List\n    </div>\n              <div class=\"sidebar-item\"\n                onClick={\n                  () => { handleWebpageStateChange() }\n                }\n                style={{\n                  color: state.currentState ? \"#FFC856\" : \"white\"\n                }}>\n                <FontAwesomeIcon icon={faList} />\n      Todo List\n    </div>\n              <div class=\"sidebar-item\"\n                onClick={\n                  () => { history.push('/friends') }\n                }>\n                <FontAwesomeIcon icon={faUserFriends} />\n          Friends\n              </div>\n\n              <div class=\"sidebar-item\"\n                onClick={\n                  () => { history.push('/navbar') }\n                }>\n                <FontAwesomeIcon icon={faCog} />\n          Settings\n              </div>\n              <div class=\"sidebar-item\"                   onClick={() => {\n                    logOut();\n                  }}>\n                <FontAwesomeIcon\n                  icon={faSignOutAlt}\n                />\n                Sign-Out\n              </div>\n              <div class=\"sidebar-bottom\">\n                [insert graphic]Bucket List\n    </div>\n            </div>\n            <div class=\"content\">\n              <input type=\"text\" class=\"form-control searchBarHome\" onChange={handleSearchChange} placeholder=\"Search...\"></input>\n              <ListContainer state={state} deleteItem={searchListItems} />\n            </div>\n          </div>\n        </body>\n      </html>\n    </Route>\n  )\n}\n\nexport default withRouter(Home);"]},"metadata":{},"sourceType":"module"}