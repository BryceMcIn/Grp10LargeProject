{"ast":null,"code":"var _jsxFileName = \"/Users/ro-hannajowallah/Library/Mobile Documents/com~apple~CloudDocs/Grp10LargeProject /frontend/src/components/Home/Home.js\";\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport friends from \"../Friends\";\nimport navbar from \"../Navbar\";\nimport \"./home.css\";\nimport { Route, withRouter, Link, Switch, useHistory } from \"react-router-dom\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faFill } from \"@fortawesome/free-solid-svg-icons\";\nimport { faList } from \"@fortawesome/free-solid-svg-icons\";\nimport { faUserFriends } from \"@fortawesome/free-solid-svg-icons\";\nimport { faCog } from \"@fortawesome/free-solid-svg-icons\";\nimport { faSignOutAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { faCheckSquare, faSquare, faTrash, faYenSign } from \"@fortawesome/free-solid-svg-icons\";\n\nfunction Home(props) {\n  const history = useHistory();\n\n  function logOut() {\n    localStorage.removeItem(localUserID);\n    history.push(\"/\");\n    console.log(localStorage);\n  }\n\n  function ListContainer(props) {\n    if (props.state != undefined && props.state.currentListItems != undefined) {\n      var listItemState = \"\";\n\n      if (props.state.currentState === 0) {\n        listItemState = \"Bucket List\";\n      } else {\n        listItemState = \"Todo List\";\n      }\n\n      if (props.state.currentListItems.length > 0) {\n        return props.state.currentListItems.map((item, index) => {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            class: \"list-item\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 38,\n              columnNumber: 13\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            class: \"type\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 39,\n              columnNumber: 15\n            }\n          }, listItemState), /*#__PURE__*/React.createElement(\"div\", {\n            class: \"listTitle\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 40,\n              columnNumber: 15\n            }\n          }, item.itemTitle), /*#__PURE__*/React.createElement(\"div\", {\n            class: \"listBody\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 41,\n              columnNumber: 15\n            }\n          }, item.caption), /*#__PURE__*/React.createElement(\"div\", {\n            class: \"complete\",\n            onClick: async e => {\n              console.log(item._id);\n\n              if (props.state.currentState == 0) {\n                //NEEDS TESTING!!!!!!!\n                const payload = {\n                  ID: item._id\n                };\n                const response = await axios.post(\"/api/edit-bucket\", payload);\n\n                if ((await response.status) != 200) {\n                  console.log(\"error editing this item idk\");\n                  return;\n                }\n\n                console.log(\"list item completed success\");\n              } else {\n                const payload = {\n                  ID: item._id\n                };\n                const response = await axios.post(\"/api/edit-todo\", payload);\n\n                if ((await response.status) != 200) {\n                  console.log(\"error editing this item idk\");\n                  return;\n                }\n\n                console.log(\"list item completed success\");\n                props.deleteItem();\n              }\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 42,\n              columnNumber: 15\n            }\n          }, item.completed ? /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n            icon: faCheckSquare,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 19\n            }\n          }) : /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n            icon: faSquare,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 19\n            }\n          })), /*#__PURE__*/React.createElement(\"div\", {\n            class: \"removeListItem\",\n            onClick: async e => {\n              console.log(item._id);\n\n              if (props.state.currentState == 0) {\n                const payload = {\n                  ID: item._id\n                };\n                const response = await axios.post(\"/api/delete-bucket\", payload);\n\n                if ((await response.status) != 200) {\n                  console.log(\"error deleting this item idk\");\n                  return;\n                }\n\n                console.log(\"delete item complete success\");\n              } else {\n                const payload = {\n                  ID: item._id\n                };\n                const response = await axios.post(\"/api/delete-todo\", payload);\n\n                if ((await response.status) != 200) {\n                  console.log(\"error deleting this item idk\");\n                  return;\n                }\n\n                props.state.currentListItems.splice(index, 1);\n                console.log(\"delete item complete sucess\");\n              }\n\n              props.deleteItem();\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n            icon: faTrash,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 17\n            }\n          })));\n        });\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null);\n  }\n\n  const [state, setState] = useState({\n    searchQuery: \"\",\n    currentListItems: [],\n    currentState: 0\n  });\n  const [addState, setAddState] = useState({\n    addTitle: \"\",\n    addDesc: \"\",\n    currentAddState: 0\n  });\n\n  const jwt = require(\"jsonwebtoken\");\n\n  var storage = require(\"../../tokenStorage.js\");\n\n  var tok = storage.retrieveToken();\n  var ud = jwt.decode(tok, {\n    json: true\n  });\n  var localUserID = ud.userID;\n  var firstName = ud.firstName;\n  var lastName = ud.lastName; //END OF TOKEN CRAP\n\n  useEffect(() => {\n    searchListItems();\n  }, [state.searchQuery, state.currentState]); //handle change template\n\n  const handleSearchChange = e => {\n    const {\n      id,\n      value\n    } = e.target;\n    console.log(state);\n    setState(prevState => ({ ...prevState,\n      searchQuery: value\n    }));\n  };\n\n  const handleWebpageStateChange = e => {\n    setState(prevState => ({ ...prevState,\n      currentState: Number(!state.currentState),\n      currentListItems: []\n    }));\n  }; //search list items\n\n\n  const searchListItems = async () => {\n    if (state.currentState == 0) {\n      const payload = {\n        userId: localUserID,\n        search: state.searchQuery\n      };\n      axios.post(\"/api/search-bucket\", payload).then(res => {\n        setState(prevState => ({ ...prevState,\n          currentListItems: res.data.results\n        }));\n      }).catch(err => {\n        console.log(err);\n      });\n    } else {\n      const payload = {\n        userId: localUserID,\n        search: state.searchQuery\n      };\n      axios.post(\"/api/search-todo\", payload).then(res => {\n        setState(prevState => ({ ...prevState,\n          currentListItems: res.data.results\n        }));\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }; //load all list items [ADD TODO]\n\n\n  const getAllListItems = async () => {\n    //YUCK! SUCKS BIG OL PEENIE\n    const payload = {\n      userID: localUserID\n    };\n    const response = await axios.post(\"/api/all-buckets\", payload);\n\n    if (response.status == 500) {\n      responseListItems = [];\n    } else {\n      var responseListItems = response.data.results;\n    }\n\n    console.log(responseListItems);\n    setState(prevState => ({ ...prevState,\n      currentListItems: responseListItems\n    }));\n  }; //add list items\n\n\n  const addItemToList = async () => {\n    if (addState.currentAddState == 0) {\n      const payload = {\n        userID: localUserID,\n        itemTitle: addState.addTitle,\n        caption: addState.addDesc\n      };\n      const response = await axios.post(\"/api/add-bucket\", payload);\n\n      if ((await response.status) != 200) {\n        console.log(\"Big error. Probably caused by connection\");\n        return;\n      }\n\n      console.log(addState);\n      setAddState(prevState => ({ ...prevState,\n        addTitle: \"\",\n        addDesc: \"\"\n      }));\n      searchListItems();\n    } else {\n      const payload = {\n        userID: localUserID,\n        itemTitle: addState.addTitle\n      };\n      const response = await axios.post(\"api/add-todo\", payload);\n\n      if ((await response.status) != 200) {\n        console.log(\"Big error. Probably caused by connection\");\n        return;\n      }\n\n      console.log(addState);\n      setAddState(prevState => ({ ...prevState,\n        addTitle: \"\",\n        addDesc: \"\"\n      }));\n      searchListItems();\n    }\n  }; //handle change template\n\n\n  const handleChange = e => {\n    const {\n      id,\n      value\n    } = e.target;\n    setAddState(prevState => ({ ...prevState,\n      [id]: value\n    }));\n  }; //handle the radio buttons\n\n\n  const handleRadio = e => {\n    const {\n      value\n    } = e.target;\n    setAddState(prevState => ({ ...prevState,\n      currentAddState: value\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(Route, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"html\", {\n    lang: \"en\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"head\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"meta\", {\n    name: \"viewport\",\n    content: \"width=device-width, initial-scale=1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"link\", {\n    rel: \"preconnect\",\n    href: \"https://fonts.gstatic.com\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"link\", {\n    href: \"https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap\",\n    rel: \"stylesheet\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"body\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"addItem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"addItem-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 15\n    }\n  }, \"Add to a list\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"addItem-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"addItemTitle form-control\",\n    id: \"addTitle\",\n    type: \"text\",\n    placeholder: \"Goal\",\n    value: addState.addTitle,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"textarea\", {\n    class: \"addItemDesc form-control\",\n    type: \"text\",\n    id: \"addDesc\",\n    placeholder: \"Describe your goal here!\",\n    value: addState.addDesc,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"buttonContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 17\n    }\n  }, \"Which list?\"), /*#__PURE__*/React.createElement(\"div\", {\n    onChange: handleRadio,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"radio\",\n    value: \"0\",\n    class: \"listTypeButton btn-check\",\n    name: \"options\",\n    id: \"option1\",\n    autocomplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    class: \"btn btn-secondary\",\n    for: \"option1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 19\n    }\n  }, \"Bucket\"), \" \", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"radio\",\n    class: \"btn-check listTypeButton\",\n    name: \"options\",\n    value: \"1\",\n    id: \"option2\",\n    autocomplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    class: \"btn btn-secondary\",\n    for: \"option2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 19\n    }\n  }, \"Todo\"))), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    disabled: !addState.addTitle.replace(/\\s/g, \"\"),\n    class: \"btn addItemButton\",\n    onClick: addItemToList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 15\n    }\n  }, \"Add\")), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"sidenav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"sidebar-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 15\n    }\n  }, \"Welcome,\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"user-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 15\n    }\n  }, firstName, \" \", lastName), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"sidebar-item\",\n    onClick: () => {\n      handleWebpageStateChange();\n    },\n    style: {\n      color: state.currentState ? \"white\" : \"#FFC856\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faFill,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 17\n    }\n  }), \"Bucket List\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"sidebar-item\",\n    onClick: () => {\n      handleWebpageStateChange();\n    },\n    style: {\n      color: state.currentState ? \"#FFC856\" : \"white\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 17\n    }\n  }), \"Todo List\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"sidebar-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faUserFriends,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Link, {\n    target: \"_blank\",\n    to: \"/friends\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"linktext\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 19\n    }\n  }, \" Friends\")), /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/friends\",\n    component: friends,\n    exact: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"sidebar-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faCog,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Link, {\n    target: \"_blank\",\n    to: \"/navbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"linktext\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 19\n    }\n  }, \"Settings\")), /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/navbar\",\n    component: navbar,\n    exact: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"sidebar-item\",\n    onClick: logOut,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faSignOutAlt,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 17\n    }\n  }), \"Sign-Out\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"sidebar-bottom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"/circle-cropped.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    class: \"form-control searchBar\",\n    onChange: handleSearchChange,\n    placeholder: \"Search...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(ListContainer, {\n    state: state,\n    deleteItem: searchListItems,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 15\n    }\n  }))))));\n}\n\nexport default withRouter(Home);","map":{"version":3,"sources":["/Users/ro-hannajowallah/Library/Mobile Documents/com~apple~CloudDocs/Grp10LargeProject /frontend/src/components/Home/Home.js"],"names":["React","useEffect","useState","axios","friends","navbar","Route","withRouter","Link","Switch","useHistory","FontAwesomeIcon","faFill","faList","faUserFriends","faCog","faSignOutAlt","faCheckSquare","faSquare","faTrash","faYenSign","Home","props","history","logOut","localStorage","removeItem","localUserID","push","console","log","ListContainer","state","undefined","currentListItems","listItemState","currentState","length","map","item","index","itemTitle","caption","e","_id","payload","ID","response","post","status","deleteItem","completed","splice","setState","searchQuery","addState","setAddState","addTitle","addDesc","currentAddState","jwt","require","storage","tok","retrieveToken","ud","decode","json","userID","firstName","lastName","searchListItems","handleSearchChange","id","value","target","prevState","handleWebpageStateChange","Number","userId","search","then","res","data","results","catch","err","getAllListItems","responseListItems","addItemToList","handleChange","handleRadio","replace","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport friends from \"../Friends\";\nimport navbar from \"../Navbar\";\nimport \"./home.css\";\nimport { Route, withRouter, Link, Switch, useHistory } from \"react-router-dom\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faFill } from \"@fortawesome/free-solid-svg-icons\";\nimport { faList } from \"@fortawesome/free-solid-svg-icons\";\nimport { faUserFriends } from \"@fortawesome/free-solid-svg-icons\";\nimport { faCog } from \"@fortawesome/free-solid-svg-icons\";\nimport { faSignOutAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport {\n  faCheckSquare,\n  faSquare,\n  faTrash,\n  faYenSign,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nfunction Home(props) {\n  const history = useHistory();\n  function logOut() {\n    localStorage.removeItem(localUserID);\n    history.push(\"/\");\n    console.log(localStorage);\n  }\n  function ListContainer(props) {\n    if (props.state != undefined && props.state.currentListItems != undefined) {\n      var listItemState = \"\";\n      if (props.state.currentState === 0) {\n        listItemState = \"Bucket List\";\n      } else {\n        listItemState = \"Todo List\";\n      }\n      if (props.state.currentListItems.length > 0) {\n        return props.state.currentListItems.map((item, index) => {\n          return (\n            <div class=\"list-item\">\n              <div class=\"type\">{listItemState}</div>\n              <div class=\"listTitle\">{item.itemTitle}</div>\n              <div class=\"listBody\">{item.caption}</div>\n              <div\n                class=\"complete\"\n                onClick={async (e) => {\n                  console.log(item._id);\n                  if (props.state.currentState == 0) {\n                    //NEEDS TESTING!!!!!!!\n                    const payload = { ID: item._id };\n                    const response = await axios.post(\n                      \"/api/edit-bucket\",\n                      payload\n                    );\n                    if ((await response.status) != 200) {\n                      console.log(\"error editing this item idk\");\n                      return;\n                    }\n                    console.log(\"list item completed success\");\n                  } else {\n                    const payload = { ID: item._id };\n                    const response = await axios.post(\n                      \"/api/edit-todo\",\n                      payload\n                    );\n                    if ((await response.status) != 200) {\n                      console.log(\"error editing this item idk\");\n                      return;\n                    }\n                    console.log(\"list item completed success\");\n                    props.deleteItem();\n                  }\n                }}\n              >\n                {item.completed ? (\n                  <FontAwesomeIcon icon={faCheckSquare} />\n                ) : (\n                  <FontAwesomeIcon icon={faSquare} />\n                )}\n              </div>\n              <div\n                class=\"removeListItem\"\n                onClick={async (e) => {\n                  console.log(item._id);\n                  if (props.state.currentState == 0) {\n                    const payload = { ID: item._id };\n                    const response = await axios.post(\n                      \"/api/delete-bucket\",\n                      payload\n                    );\n                    if ((await response.status) != 200) {\n                      console.log(\"error deleting this item idk\");\n                      return;\n                    }\n                    console.log(\"delete item complete success\");\n                  } else {\n                    const payload = { ID: item._id };\n                    const response = await axios.post(\n                      \"/api/delete-todo\",\n                      payload\n                    );\n                    if ((await response.status) != 200) {\n                      console.log(\"error deleting this item idk\");\n                      return;\n                    }\n                    props.state.currentListItems.splice(index, 1);\n                    console.log(\"delete item complete sucess\");\n                  }\n                  props.deleteItem();\n                }}\n              >\n                <FontAwesomeIcon icon={faTrash} />\n              </div>\n            </div>\n          );\n        });\n      }\n    }\n    return <></>;\n  }\n  const [state, setState] = useState({\n    searchQuery: \"\",\n    currentListItems: [],\n    currentState: 0,\n  });\n\n  const [addState, setAddState] = useState({\n    addTitle: \"\",\n    addDesc: \"\",\n    currentAddState: 0,\n  });\n\n  const jwt = require(\"jsonwebtoken\");\n  var storage = require(\"../../tokenStorage.js\");\n\n  var tok = storage.retrieveToken();\n  var ud = jwt.decode(tok, { json: true });\n\n  var localUserID = ud.userID;\n  var firstName = ud.firstName;\n  var lastName = ud.lastName;\n  //END OF TOKEN CRAP\n\n  useEffect(() => {\n    searchListItems();\n  }, [state.searchQuery, state.currentState]);\n\n  //handle change template\n  const handleSearchChange = (e) => {\n    const { id, value } = e.target;\n    console.log(state);\n    setState((prevState) => ({\n      ...prevState,\n      searchQuery: value,\n    }));\n  };\n\n  const handleWebpageStateChange = (e) => {\n    setState((prevState) => ({\n      ...prevState,\n      currentState: Number(!state.currentState),\n      currentListItems: [],\n    }));\n  };\n\n  //search list items\n  const searchListItems = async () => {\n    if (state.currentState == 0) {\n      const payload = { userId: localUserID, search: state.searchQuery };\n      axios\n        .post(\"/api/search-bucket\", payload)\n        .then((res) => {\n          setState((prevState) => ({\n            ...prevState,\n            currentListItems: res.data.results,\n          }));\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    } else {\n      const payload = { userId: localUserID, search: state.searchQuery };\n      axios\n        .post(\"/api/search-todo\", payload)\n        .then((res) => {\n          setState((prevState) => ({\n            ...prevState,\n            currentListItems: res.data.results,\n          }));\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n  };\n\n  //load all list items [ADD TODO]\n  const getAllListItems = async () => {\n    //YUCK! SUCKS BIG OL PEENIE\n    const payload = { userID: localUserID };\n    const response = await axios.post(\"/api/all-buckets\", payload);\n    if (response.status == 500) {\n      responseListItems = [];\n    } else {\n      var responseListItems = response.data.results;\n    }\n    console.log(responseListItems);\n    setState((prevState) => ({\n      ...prevState,\n      currentListItems: responseListItems,\n    }));\n  };\n\n  //add list items\n  const addItemToList = async () => {\n    if (addState.currentAddState == 0) {\n      const payload = {\n        userID: localUserID,\n        itemTitle: addState.addTitle,\n        caption: addState.addDesc,\n      };\n      const response = await axios.post(\"/api/add-bucket\", payload);\n      if ((await response.status) != 200) {\n        console.log(\"Big error. Probably caused by connection\");\n        return;\n      }\n      console.log(addState);\n      setAddState((prevState) => ({\n        ...prevState,\n        addTitle: \"\",\n        addDesc: \"\",\n      }));\n      searchListItems();\n    } else {\n      const payload = { userID: localUserID, itemTitle: addState.addTitle };\n      const response = await axios.post(\"api/add-todo\", payload);\n      if ((await response.status) != 200) {\n        console.log(\"Big error. Probably caused by connection\");\n        return;\n      }\n      console.log(addState);\n      setAddState((prevState) => ({\n        ...prevState,\n        addTitle: \"\",\n        addDesc: \"\",\n      }));\n      searchListItems();\n    }\n  };\n\n  //handle change template\n  const handleChange = (e) => {\n    const { id, value } = e.target;\n    setAddState((prevState) => ({\n      ...prevState,\n      [id]: value,\n    }));\n  };\n\n  //handle the radio buttons\n  const handleRadio = (e) => {\n    const { value } = e.target;\n    setAddState((prevState) => ({\n      ...prevState,\n      currentAddState: value,\n    }));\n  };\n\n  return (\n    <Route>\n      <html lang=\"en\">\n        <head>\n          <meta\n            name=\"viewport\"\n            content=\"width=device-width, initial-scale=1\"\n          ></meta>\n          <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\"></link>\n          <link\n            href=\"https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap\"\n            rel=\"stylesheet\"\n          ></link>\n        </head>\n        <body>\n          <div class=\"wrapper\">\n            <div class=\"addItem\">\n              <div class=\"addItem-header\">Add to a list</div>\n              <div class=\"addItem-container\">\n                <input\n                  class=\"addItemTitle form-control\"\n                  id=\"addTitle\"\n                  type=\"text\"\n                  placeholder=\"Goal\"\n                  value={addState.addTitle}\n                  onChange={handleChange}\n                ></input>\n                <textarea\n                  class=\"addItemDesc form-control\"\n                  type=\"text\"\n                  id=\"addDesc\"\n                  placeholder=\"Describe your goal here!\"\n                  value={addState.addDesc}\n                  onChange={handleChange}\n                ></textarea>\n              </div>\n              <div class=\"buttonContainer\">\n                <div>Which list?</div>\n                <div onChange={handleRadio}>\n                  <input\n                    type=\"radio\"\n                    value=\"0\"\n                    class=\"listTypeButton btn-check\"\n                    name=\"options\"\n                    id=\"option1\"\n                    autocomplete=\"off\"\n                  ></input>\n                  <label class=\"btn btn-secondary\" for=\"option1\">\n                    Bucket\n                  </label>{\" \"}\n                  <input\n                    type=\"radio\"\n                    class=\"btn-check listTypeButton\"\n                    name=\"options\"\n                    value=\"1\"\n                    id=\"option2\"\n                    autocomplete=\"off\"\n                  ></input>\n                  <label class=\"btn btn-secondary\" for=\"option2\">\n                    Todo\n                  </label>\n                </div>\n              </div>\n              <button\n                type=\"button\"\n                disabled={!addState.addTitle.replace(/\\s/g, \"\")}\n                class=\"btn addItemButton\"\n                onClick={addItemToList}\n              >\n                Add\n              </button>\n            </div>\n            <div class=\"sidenav\">\n              <div class=\"sidebar-header\">Welcome,</div>\n              <div class=\"user-name\">\n                {firstName} {lastName}\n              </div>\n              <div\n                class=\"sidebar-item\"\n                onClick={() => {\n                  handleWebpageStateChange();\n                }}\n                style={{\n                  color: state.currentState ? \"white\" : \"#FFC856\",\n                }}\n              >\n                <FontAwesomeIcon icon={faFill} />\n                Bucket List\n              </div>\n              <div\n                class=\"sidebar-item\"\n                onClick={() => {\n                  handleWebpageStateChange();\n                }}\n                style={{\n                  color: state.currentState ? \"#FFC856\" : \"white\",\n                }}\n              >\n                <FontAwesomeIcon icon={faList} />\n                Todo List\n              </div>\n\n              <div class=\"sidebar-item\">\n                <FontAwesomeIcon icon={faUserFriends} />\n                <Link target={\"_blank\"} to=\"/friends\">\n                  <span className=\"linktext\"> Friends</span>\n                </Link>\n                <Switch>\n                  <Route path=\"/friends\" component={friends} exact={true} />\n                </Switch>\n              </div>\n\n              <div class=\"sidebar-item\">\n                <FontAwesomeIcon icon={faCog} />\n                <Link target={\"_blank\"} to=\"/navbar\">\n                  <span className=\"linktext\">Settings</span>\n                </Link>\n                <Switch>\n                  <Route path=\"/navbar\" component={navbar} exact={true} />\n                </Switch>\n              </div>\n              <div class=\"sidebar-item\" onClick={logOut}>\n                <FontAwesomeIcon icon={faSignOutAlt} />\n                Sign-Out\n              </div>\n              <div class=\"sidebar-bottom\">\n                <img src=\"/circle-cropped.png\" />\n              </div>\n            </div>\n            <div class=\"content\">\n              <input\n                type=\"text\"\n                class=\"form-control searchBar\"\n                onChange={handleSearchChange}\n                placeholder=\"Search...\"\n              ></input>\n              <ListContainer state={state} deleteItem={searchListItems} />\n            </div>\n          </div>\n        </body>\n      </html>\n    </Route>\n  );\n}\n\nexport default withRouter(Home);\n"]},"metadata":{},"sourceType":"module"}